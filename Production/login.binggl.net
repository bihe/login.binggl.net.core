server {
	listen login.binggl.net:80;
	listen login.binggl.net:443 ssl;
	#listen [::]:80 default_server ipv6only=on;

	root /var/www/vhosts/login.binggl.net;
	index index.html index.htm;

	server_name login.binggl.net; 

	# force https-redirects
    	if ($scheme = http) {
        	return 301 https://$server_name$request_uri;
	}
	
	ssl_certificate /etc/letsencrypt/live/login.binggl.net/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/login.binggl.net/privkey.pem;
    	
	include snippets/ssl-params.conf;                                       
                                                                         
	index index.html index.htm index.nginx-debian.html;                     
                                                                         
	#location / {                                                           
	# 	# First attempt to serve request as file, then                  
 	#       # as directory, then fall back to displaying a 404.             
 	#       try_files $uri $uri/ =404;                                      
 	#}                                                                      
                                                                         
	location / {                                                            
		proxy_redirect off;                                             
		
		proxy_pass					http://localhost:3003;                               
		proxy_http_version 			1.1;
		proxy_set_header			Upgrade $http_upgrade;
	    proxy_set_header 			Connection keep-alive; 
		proxy_set_header 			Host $host;                                    
		proxy_set_header 			X-Real-IP $remote_addr;                        
		proxy_set_header 			X-Forwarded-For  $proxy_add_x_forwarded_for;   
		proxy_set_header 			X-Forwarded-Proto $scheme;                     
		proxy_cache_bypass 			$http_upgrade;                               

		proxy_connect_timeout  		90s;
	    proxy_send_timeout      	90s;
        proxy_read_timeout      	90s;

		proxy_buffer_size   		128k;
		proxy_buffers  				4 256k;
		proxy_busy_buffers_size   	256k;
    }                                                                       	
}
